# 梦境记录器 🌙✨

> 一个基于Flutter开发的智能梦境记录与分析应用

## 📱 应用截图

*即将添加精美的应用截图展示*

## 🌟 应用亮点

### 💭 智能梦境记录
- 📝 **直观记录**: 简洁优雅的界面，让您轻松记录每一个梦境
- 🏷️ **智能标签**: 自动识别梦境类型和情感色彩
- 📅 **时间轴**: 按时间顺序浏览您的梦境历程
- 🔍 **快速搜索**: 通过关键词快速找到特定梦境

### 🎨 AI梦境可视化
- 🖼️ **场景生成**: 基于即梦API，将梦境描述转化为精美图像
- 🎯 **多场景模式**: 为同一个梦境生成多个不同角度的场景
- 🔄 **场景切换**: 流畅的左右滑动切换体验
- 📐 **高清输出**: 支持高分辨率图像生成

### 🧠 专业梦境解析
- 🤖 **DeepSeek AI**: 接入先进的AI模型进行梦境分析
- 📊 **流式输出**: 实时显示解析过程，增强交互体验
- 💡 **深度洞察**: 提供心理学角度的专业解读
- 🎯 **个性化建议**: 基于梦境内容给出生活建议

### 🎵 沉浸式体验
- 🎼 **背景音乐**: 精选舒缓音乐，营造梦幻氛围
- 🎛️ **音频控制**: 美观的播放控制界面
- 🖼️ **全屏查看**: 长按图片进入沉浸式全屏模式
- 👆 **手势交互**: 支持缩放、拖拽、双击等多种手势

### 🌐 社区互动
- 🚀 **快速分享**: 一键分享梦境到社区平台
- 🎭 **匿名模式**: 保护隐私的匿名分享选项
- 💬 **互动交流**: 与其他用户分享梦境体验

## 🎯 核心功能详解

### 梦境记录页面
- **现代化卡片设计**: 采用Material Design 3规范
- **渐变色彩搭配**: 蓝紫粉渐变，营造梦幻感
- **动画效果**: 卡片加载时的淡入和错位动画
- **下拉刷新**: 支持下拉刷新功能
- **扩展浮动按钮**: 显示"记录梦境"文字提示

### 梦境生成页面
- **音乐控制**: 右上角音乐播放控制按钮
- **场景导航**: 底部左右箭头按钮控制场景切换
- **场景指示器**: 显示当前场景数和总场景数
- **智能生成**: 根据文本描述生成对应视觉场景

### 梦境详情页面
- **沉浸式背景**: 全屏背景图片展示
- **下拉交互**: 下拉查看背景全景效果
- **长按全屏**: 长按背景图片进入全屏查看模式
- **AI解析**: 流式输出的AI梦境解析功能
- **分享功能**: 快速分享到社区平台

### 全屏图片查看器
- **手势控制**: 单击、双击、拖拽、捏合等完整手势支持
- **智能缩放**: 双击在1x和2x之间切换
- **自由缩放**: 支持0.5x到4x的自由缩放范围
- **UI切换**: 单击显示/隐藏界面元素
- **动画过渡**: 流畅的进入和退出动画

## 🛠️ 技术实现

### 架构设计
```
lib/
├── main.dart                    # 应用入口
├── pages/                       # 页面层
│   ├── daydream_page.dart      # 梦境生成页面
│   ├── dream_record_page.dart  # 梦境记录列表
│   ├── dream_detail_page_enhanced.dart # 梦境详情页面
│   └── edit_dream_page.dart    # 梦境编辑页面
├── services/                    # 服务层
│   ├── database_service.dart   # 数据库服务
│   ├── deepseek_service.dart   # AI解析服务
│   └── dream_api_service.dart  # 梦境API服务
├── models/                      # 数据模型层
├── widgets/                     # 公共组件
└── utils/                       # 工具类
```

### 数据库设计
- **表结构**: dreams表存储梦境记录
- **字段**: id, title, content, time, imageUrl等
- **索引**: 基于时间和标题的复合索引
- **事务**: 支持事务操作保证数据一致性

### API集成
- **DeepSeek API**: 流式AI解析服务
- **即梦API**: 图像生成服务
- **社区API**: 梦境分享服务

## 🎨 设计理念

### 视觉设计
- **色彩方案**: 蓝紫粉梦幻渐变主题
- **布局原则**: 简洁、直观、易用
- **动画设计**: 自然流畅的过渡效果
- **图标系统**: 统一的视觉语言

### 用户体验
- **交互反馈**: 触觉反馈和视觉反馈相结合
- **加载状态**: 优雅的加载动画和提示
- **错误处理**: 友好的错误提示和恢复机制
- **性能优化**: 图片缓存和懒加载

## 📦 依赖包说明

### 核心依赖
```yaml
dependencies:
  flutter: sdk: flutter
  cupertino_icons: ^1.0.8    # iOS风格图标
  sqflite: ^2.4.2            # SQLite数据库
  http: ^1.1.0               # HTTP请求
  dio: ^5.4.0                # 强大的HTTP客户端
  audioplayers: ^5.2.1       # 音频播放
```

### UI增强
```yaml
  extended_image: ^10.0.1           # 增强图片组件
  cached_network_image: ^3.4.1     # 网络图片缓存
  animated_text_kit: ^4.2.2        # 文本动画
  flutter_staggered_grid_view: ^0.7.0  # 瀑布流布局
  pull_to_refresh: ^2.0.0          # 下拉刷新
```

### 工具库
```yaml
  path: ^1.9.1                # 路径处理
  intl: ^0.20.2               # 国际化
  image_picker: ^1.1.2        # 图片选择
  path_provider: ^2.1.5       # 路径获取
  envied: ^1.1.1              # 环境变量
  crypto: ^3.0.3              # 加密算法
```

## 🚀 快速开始

### 1. 环境准备
确保您已安装Flutter开发环境：
```bash
flutter doctor -v
```

### 2. 获取代码
```bash
git clone <repository-url>
cd dream
```

### 3. 安装依赖
```bash
flutter pub get
```

### 4. 配置环境变量
在项目根目录创建`.env`文件：
```env
DEEPSEEK_API_KEY=your_deepseek_api_key
JIMENG_SC_KEY=your_jimeng_sc_key
DREAM_API_BASE_URL=your_dream_api_base_url
```

### 5. 生成环境配置
```bash
dart run build_runner build
```

### 6. 运行应用
```bash
flutter run
```

## 📱 构建发布

### Android APK
```bash
flutter build apk --release
```

### iOS IPA
```bash
flutter build ios --release
```

### 应用包大小优化
```bash
flutter build apk --split-per-abi
```

## 🔧 配置说明

### API配置
1. **DeepSeek API**: 用于AI梦境解析
2. **即梦API**: 用于图像生成
3. **社区API**: 用于梦境分享

### 音频资源
将背景音乐文件放置在 `assets/audio/dream_music.mp3`

### 图片资源
- 默认背景图片: `assets/images/dream_background.jpg`
- 生成的梦境图片存储在本地文档目录

## 🎯 功能路线图

### 已完成 ✅
- [x] 基础梦境记录功能
- [x] AI梦境场景生成
- [x] AI梦境解析（流式输出）
- [x] 音频播放控制
- [x] 全屏图片查看
- [x] 社区分享功能
- [x] 现代化UI设计

### 计划中 🎯
- [ ] 梦境统计分析
- [ ] 梦境日历视图
- [ ] 社区互动功能
- [ ] 梦境导入导出
- [ ] 主题自定义
- [ ] 多语言支持

## 💡 使用技巧

### 梦境记录
1. 醒来后立即记录，记忆最清晰
2. 记录时包含情感、颜色、人物等细节
3. 定期回顾和整理梦境记录

### AI生成
1. 描述越详细，生成效果越好
2. 可以多次生成，选择最满意的场景
3. 利用场景导航功能浏览所有生成结果

### 社区分享
1. 选择有趣或有意义的梦境分享
2. 可以选择匿名模式保护隐私
3. 与其他用户交流梦境体验

## 🤝 参与贡献

我们欢迎所有形式的贡献，包括但不限于：

- 🐛 Bug修复
- ✨ 新功能开发
- 📝 文档完善
- 🎨 UI/UX改进
- 🌐 多语言翻译

### 贡献流程
1. Fork本仓库
2. 创建特性分支
3. 提交您的更改
4. 创建Pull Request

## 📞 联系我们

如果您有任何问题或建议，请通过以下方式联系我们：

- 📧 邮箱: [dream-support@example.com]
- 🐛 Issues: [GitHub Issues](../../issues)
- 💬 讨论: [GitHub Discussions](../../discussions)

## 📄 开源协议

本项目基于MIT协议开源，详情请查看 [LICENSE](LICENSE) 文件。

---

<div align="center">
  <h3>🌙 愿每个梦境都成为美好的回忆 ✨</h3>
  <p>如果这个项目对您有帮助，请给个⭐Star支持一下！</p>
</div> 